<%- include('partials/header') %>

    <!-- Professional Contact Hero -->
    <section class="contact-hero-pro">
        <div class="hero-background">
            <div class="gradient-orb gradient-orb-1"></div>
            <div class="gradient-orb gradient-orb-2"></div>
        </div>
        <div class="container">
            <div class="hero-content-wrapper">
                <div class="hero-badge-pro">
                    <i class="fas fa-sparkles"></i>
                    <span>Contact Our Innovation Lab</span>
                </div>
                <h1 class="hero-title-pro">Let's Build Something <span>Great Together</span></h1>
                <p class="hero-subtitle-pro">Whether you're a startup or an enterprise, our team is ready to help you
                    navigate your digital transformation journey with expert precision.</p>

                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">2 Hrs</span>
                        <span class="stat-label">Response Time</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Support Available</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Confidentiality</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Professional Contact Section -->
    <section class="contact-section-pro">
        <div class="container">
            <div class="contact-container">

                <!-- Left Column: Form -->
                <div class="contact-form-wrapper">
                    <div class="form-header">
                        <h2>Send us a Message</h2>
                        <p>Tell us about your project and our experts will get back to you shortly.</p>
                    </div>

                    <% if (typeof errors !=='undefined' && errors.length> 0) { %>
                        <div class="form-alert alert-error">
                            <div class="alert-icon">
                                <i class="fas fa-circle-exclamation"></i>
                            </div>
                            <div class="alert-content">
                                <h4>Please correct the following:</h4>
                                <ul>
                                    <% errors.forEach(error=> { %>
                                        <li>
                                            <%= error.msg %>
                                        </li>
                                        <% }); %>
                                </ul>
                            </div>
                        </div>
                        <% } %>

                            <form action="/contact" method="POST" class="contact-form-pro" novalidate>

                                <!-- Personal Information Section -->
                                <div class="form-section">
                                    <div class="section-label">Personal Information</div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="fullName">Full Name *</label>
                                            <div class="input-wrapper">
                                                <input type="text" id="fullName" name="fullName" required
                                                    placeholder="John Doe" maxlength="100"
                                                    value="<%= typeof formData !== 'undefined' ? formData.fullName : '' %>">
                                                <span class="input-icon"><i class="fas fa-user-tie"></i></span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="email">Email Address *</label>
                                            <div class="input-wrapper">
                                                <input type="email" id="email" name="email" required
                                                    placeholder="john@company.com" maxlength="100"
                                                    value="<%= typeof formData !== 'undefined' ? formData.email : '' %>">
                                                <span class="input-icon"><i
                                                        class="fas fa-envelope-open-text"></i></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="mobile">Mobile Number *</label>
                                            <div class="input-wrapper">
                                                <input type="tel" id="mobile" name="mobile" required
                                                    placeholder="9876543210" pattern="[6-9][0-9]{9}" maxlength="10"
                                                    value="<%= typeof formData !== 'undefined' ? formData.mobile : '' %>">
                                                <span class="input-icon"><i class="fas fa-mobile-screen"></i></span>
                                            </div>
                                            <small class="help-text">10-digit Indian mobile number</small>
                                        </div>

                                        <div class="form-group">
                                            <label for="organizationName">Organization Name *</label>
                                            <div class="input-wrapper">
                                                <input type="text" id="organizationName" name="organizationName"
                                                    required placeholder="Your Institution or Company" maxlength="150"
                                                    value="<%= typeof formData !== 'undefined' ? formData.organizationName : '' %>">
                                                <span class="input-icon"><i class="fas fa-building-columns"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Project Information Section -->
                                <div class="form-section">
                                    <div class="section-label">Project Requirements</div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="organizationType">Organization Type *</label>
                                            <div class="input-wrapper select-wrapper">
                                                <select id="organizationType" name="organizationType" required>
                                                    <option value="" disabled selected>Select organization type</option>
                                                    <option value="College">University / College</option>
                                                    <option value="School">School / K-12 Institute</option>
                                                    <option value="Business">Enterprise Business</option>
                                                    <option value="Startup">Early Stage Startup</option>
                                                    <option value="Other">Other Organization</option>
                                                </select>
                                                <span class="input-icon"><i class="fas fa-layer-group"></i></span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="serviceInterested">Service Interest *</label>
                                            <div class="input-wrapper select-wrapper">
                                                <select id="serviceInterested" name="serviceInterested" required>
                                                    <option value="" disabled selected>Select a solution</option>
                                                    <option value="Education ERP">Education ERP Solution</option>
                                                    <option value="Website Development">Web Development</option>
                                                    <option value="Custom Software">Custom Enterprise Suite</option>
                                                    <option value="Mobile App">Mobile Application</option>
                                                    <option value="Other">Other Solution</option>
                                                </select>
                                                <span class="input-icon"><i class="fas fa-microchip"></i></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="message">Tell us about your goals *</label>
                                        <div class="input-wrapper">
                                            <textarea id="message" name="message" rows="6" required
                                                placeholder="Briefly describe your requirements, challenges, and what you hope to achieve..."
                                                maxlength="2000"><%= typeof formData !== 'undefined' ? formData.message : '' %></textarea>
                                            <span class="input-icon"><i class="fas fa-comment-medical"></i></span>
                                            <span class="char-count"><span id="charCount">0</span>/2000</span>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="btn-submit-pro" id="submitBtn">
                                    <span class="btn-text">Send Your Inquiry</span>
                                    <span class="btn-icon"><i class="fas fa-paper-plane-top"></i></span>
                                </button>

                                <p class="form-notice">
                                    <i class="fas fa-shield-halved"></i>
                                    Your data is secure. We never share your information with third parties.
                                </p>
                            </form>
                </div>

                <!-- Right Column: Sidebar -->
                <div class="contact-sidebar">

                    <!-- Quick Assistance Card -->
                    <div class="sidebar-card info-card">
                        <div class="card-icon-circle">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h3>Direct Contact</h3>
                        <p>Need to speak with us immediately? Drop us an email or call.</p>
                        <a href="mailto:karmanyainfotech@zohomail.com" class="info-link">
                            <i class="fas fa-envelope-circle-check"></i>
                            Email Our Experts
                        </a>
                    </div>

                    <!-- Features/Promises -->
                    <div class="sidebar-card features-card">
                        <div class="features-list">
                            <div class="feature-item">
                                <div class="feature-check">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="feature-content">
                                    <h4>Rapid Response</h4>
                                    <p>Guaranteed 2-hour reply</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check">
                                    <i class="fas fa-user-gear"></i>
                                </div>
                                <div class="feature-content">
                                    <h4>Expert Advice</h4>
                                    <p>Talk directly to architects</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check">
                                    <i class="fas fa-file-contract"></i>
                                </div>
                                <div class="feature-content">
                                    <h4>Free Trial</h4>
                                    <p>No-obligation POC available</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Location Card -->
                    <div class="sidebar-card location-card">
                        <div class="location-icon">
                            <i class="fas fa-location-dot"></i>
                        </div>
                        <h4>Headquarters</h4>
                        <p>Indore, Madhya Pradesh, India</p>
                        <div class="location-time">
                            <span id="location-time">00:00:00</span>
                            <span class="time-zone">IST</span>
                        </div>
                    </div>

                    <!-- Social Presence -->
                    <div class="social-links-section">
                        <p class="social-label">Join Our Community</p>
                        <div class="social-icons">
                            <a href="#" class="social-icon" title="LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" class="social-icon" title="X (Twitter)">
                                <i class="fab fa-x-twitter"></i>
                            </a>
                            <a href="#" class="social-icon" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="social-icon" title="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Real-time IST Clock
        function updateLocationTime() {
            const options = {
                timeZone: 'Asia/Kolkata',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            const timeString = new Intl.DateTimeFormat('en-US', options).format(new Date());
            const timeEl = document.getElementById('location-time');
            if (timeEl) timeEl.textContent = timeString;
        }

        // Form Logic
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('.contact-form-pro');
            const messageField = document.getElementById('message');
            const charCount = document.getElementById('charCount');
            const submitBtn = document.getElementById('submitBtn');
            const orgTypeSelect = document.getElementById('organizationType');
            const serviceSelect = document.getElementById('serviceInterested');

            // Character Counter
            if (messageField && charCount) {
                const updateCount = () => charCount.textContent = messageField.value.length;
                messageField.addEventListener('input', updateCount);
                updateCount(); // Initial state
            }

            // Restore Select Values (EJS)
            const orgTypeValue = '<%= typeof formData !== "undefined" ? formData.organizationType || "" : "" %>';
            const serviceValue = '<%= typeof formData !== "undefined" ? formData.serviceInterested || "" : "" %>';

            if (orgTypeSelect && orgTypeValue) orgTypeSelect.value = orgTypeValue;
            if (serviceSelect && serviceValue) serviceSelect.value = serviceValue;

            // Form Submit Loading State
            if (form) {
                form.addEventListener('submit', function (e) {
                    submitBtn.disabled = true;
                    submitBtn.classList.add('loading');
                    submitBtn.innerHTML = `
                        <span class="btn-text">Sending Inquiry...</span>
                        <span class="btn-icon"><i class="fas fa-spinner fa-spin"></i></span>
                    `;
                });
            }

            // Visual Focus Enhancement for Icons
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', () => {
                    input.closest('.input-wrapper').classList.add('is-focused');
                });
                input.addEventListener('blur', () => {
                    input.closest('.input-wrapper').classList.remove('is-focused');
                });
            });
        });

        // Initialize Clock
        updateLocationTime();
        setInterval(updateLocationTime, 1000);
    </script>

    <%- include('partials/footer') %>